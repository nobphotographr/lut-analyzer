# GLAZE Analyzer - Web Application 要件定義書

## 📋 プロジェクト概要

### **プロジェクト名**
GLAZE Analyzer - Simple LUT Recommendation Engine

### **プロジェクト目的**
- Claude Code版の実用的なRGB分析ロジックをWebアプリ化
- 5枚程度の写真から最適なLUT組み合わせと不透明度を提案
- シンプルで直感的なUIで、誰でも使えるツールを提供

### **背景・課題**
- GLAZE SCOUT（高度版）より、Claude Code版（シンプル版）の方が実際にエグルストンっぽい色調を実現
- デスクトップアプリより、Webアプリの方がアクセシビリティが高い
- RGB直接分析の実用性を証明し、広く利用可能にしたい

---

## 🎯 機能要件

### **Core機能（MVP）**

#### **F001: 画像アップロード機能**
- **入力**: 5枚程度の画像ファイル（JPG/PNG）
- **制限**: 
  - ファイルサイズ: 1枚あたり最大10MB
  - 合計5枚まで
  - 形式: JPEG, PNG のみ
- **処理**: ブラウザ内でCanvas APIを使用してRGB値抽出
- **UI**: ドラッグ&ドロップ + ファイル選択ボタン

#### **F002: RGB分析エンジン**
- **分析方法**: Claude Code版と同じロジックをJavaScriptに移植
- **分析項目**:
  ```javascript
  // 基本RGB統計
  r_mean, g_mean, b_mean
  
  // 色調バイアス（Claude Code版と同じ計算）
  warm_bias = r_mean - b_mean
  cool_bias = b_mean - r_mean  
  green_push = g_mean - (r_mean + b_mean) / 2
  
  // コントラスト
  overall_contrast = (r_std + g_std + b_std) / 3
  ```

#### **F003: LUT推奨エンジン**
- **推奨ロジック**: Claude Code版の閾値システムをそのまま移植
- **出力内容**:
  1. **ベースLUT**: メインとなるLUT + 不透明度
  2. **調整LUT**: コントラスト調整用LUT + 不透明度  
  3. **微調整LUT**: 色バランス調整用LUT + 不透明度
  4. **最終組み合わせ**: 3つのLUTの具体的組み合わせ

#### **F004: 結果表示機能**
- **分析結果表示**: 数値データ（暖色バイアス、コントラスト、緑プッシュ）
- **LUT推奨表示**: LUT名 + 不透明度 + 適用理由
- **コピー機能**: 推奨設定をクリップボードにコピー

---

## 🎨 UI/UX要件

### **デザイン方針**
- **シンプル・直感的**: 技術的複雑さを隠したわかりやすいUI
- **モダン**: Next.js + Tailwind CSSでクリーンなデザイン
- **レスポンシブ**: PC・タブレット・スマホ対応

### **画面構成**

#### **メイン画面**
```
┌─────────────────────────────────────────┐
│ 🎨 GLAZE Analyzer                      │
│ Simple LUT Recommendation Engine        │
├─────────────────┬───────────────────────┤
│                 │                       │
│ 📸 画像アップロード │  🎯 分析結果           │
│                 │                       │
│ [ドラッグ&ドロップ]  │  📊 色調分析          │
│ [ファイル選択]      │  - 暖色バイアス: 0.065  │
│                 │  - コントラスト: 0.142  │
│ 📷 画像プレビュー   │  - 緑プッシュ: 0.023   │
│ [画像1] [画像2]    │                       │
│ [画像3] [画像4]    │  🎨 推奨LUT組み合わせ   │
│ [画像5]          │  1. Maverick.cube - 80% │
│                 │  2. clean contrast - 35%│
│ [分析開始]        │  3. F-PRO400H - 20%    │
│                 │                       │
│                 │  [設定をコピー]          │
└─────────────────┴───────────────────────┘
```

### **ユーザーフロー**
1. **画像選択**: ドラッグ&ドロップまたはファイル選択で5枚選択
2. **プレビュー確認**: 選択した画像の確認
3. **分析実行**: 「分析開始」ボタンクリック
4. **結果確認**: 色調分析結果 + LUT推奨を表示
5. **設定コピー**: Photoshopで使用する設定をコピー

---

## 🔧 技術要件

### **技術スタック**
- **フロントエンド**: Next.js 14 (App Router)
- **UI Framework**: React 18
- **スタイリング**: Tailwind CSS
- **画像処理**: Canvas API (ブラウザネイティブ)
- **状態管理**: React useState/useEffect
- **デプロイ**: Vercel (無料プラン)

### **アーキテクチャ**
```
┌─────────────────┐
│   ブラウザ       │ ← ユーザー操作
└─────────────────┘
         ↓
┌─────────────────┐
│   Next.js App   │ ← UIコンポーネント
└─────────────────┘
         ↓
┌─────────────────┐
│  Canvas API     │ ← 画像RGB抽出
└─────────────────┘
         ↓
┌─────────────────┐
│ Analysis Engine │ ← Claude Code版ロジック
└─────────────────┘
         ↓
┌─────────────────┐
│ LUT Recommender │ ← 推奨アルゴリズム
└─────────────────┘
```

### **パフォーマンス要件**
- **分析時間**: 5枚の画像分析を3秒以内
- **ファイルサイズ**: 初回読み込み500KB以下
- **レスポンス**: UI操作は100ms以内に反応

---

## 🚀 開発フェーズ

### **Phase 1: MVP開発（1-2日）**
- [ ] Next.jsプロジェクト初期化
- [ ] 画像アップロード機能
- [ ] RGB分析エンジン実装
- [ ] LUT推奨ロジック実装
- [ ] 基本UI作成

### **Phase 2: UI改善（1日）**  
- [ ] レスポンシブデザイン対応
- [ ] エラーハンドリング
- [ ] ローディング状態の改善
- [ ] 結果表示の改善

### **Phase 3: デプロイ・テスト（半日）**
- [ ] Vercelデプロイ設定
- [ ] 実画像でのテスト
- [ ] Claude Code版との結果比較検証

---

## 📊 成功指標

### **技術的成功指標**
- [ ] Claude Code版と同じ推奨結果を出力
- [ ] 5枚画像の分析が3秒以内で完了
- [ ] エラーなくVercelにデプロイ完了

### **ユーザビリティ指標**
- [ ] 初回ユーザーが迷わず使用可能
- [ ] 分析結果がPhotoshopで適用可能
- [ ] スマホでも操作可能

---

## ⚠️ 制約・前提条件

### **技術的制約**
- **ブラウザ依存**: Canvas API対応ブラウザのみ
- **クライアントサイド処理**: サーバーレスで画像処理
- **メモリ制限**: ブラウザメモリ内での画像処理

### **機能的制約**
- **LUT適用機能なし**: 推奨のみで実際の適用はPhotoshop
- **画像枚数制限**: 最大5枚（性能とUI制約）
- **単純化**: GLAZE SCOUTの高度機能は実装しない

### **ビジネス制約**
- **無料運用**: Vercel無料プランの制限内
- **GLAZE LUT依存**: GLAZEの20個のLUTに特化

---

## 💡 将来的な拡張案

### **短期拡張（必要に応じて）**
- [ ] 画像の個別分析結果表示
- [ ] 分析結果のダウンロード機能
- [ ] LUT効果のプレビュー機能

### **中期拡張**
- [ ] 他のLUTパックサポート
- [ ] ユーザー独自LUTのアップロード
- [ ] 分析履歴の保存

### **長期拡張**
- [ ] AI学習機能（ユーザーフィードバック）
- [ ] リアルタイムプレビュー
- [ ] モバイルアプリ化

---

## 📝 開発開始前のチェックリスト

- [ ] 要件定義の合意
- [ ] 技術スタックの確認
- [ ] デプロイ環境の確認（Vercel）
- [ ] Claude Code版ロジックの理解
- [ ] Next.jsプロジェクト初期化

**次のステップ**: 要件定義の確認・合意 → 技術アーキテクチャ詳細設計 → 開発開始