# Turner Blend Photo Analyzer - Web Application 要件定義書

## 📋 プロジェクト概要

### **プロジェクト名**
Turner Blend Photo Analyzer - 5方向性ブレンドレシピ推奨システム

### **プロジェクト目的**
- Claude Code版の5方向性ブレンドレシピシステムをWebアプリ化
- 写真分析から5つの方向性別ブレンドレシピを提案
- Turner Blend全20個LUTの価値を最大化する実用ツール

### **背景・課題**
- Claude Code版（シンプル・軽量）の優秀な分析精度をWeb化
- 「ブレンドこそが価値」のTurner Blendコンセプトを体現
- Sequential Cascade方式でPhotoshop完全互換のレシピ提供

---

## 🎯 機能要件

### **Core機能（MVP）**

#### **F001: 画像アップロード機能**
- **入力**: 1-5枚の画像ファイル（JPG/PNG）
- **制限**: 
  - ファイルサイズ: 1枚あたり最大10MB
  - 最大5枚まで（複数枚は平均値で分析）
  - 形式: JPEG, PNG のみ
- **処理**: ブラウザ内でCanvas APIを使用してRGB値抽出
- **UI**: ドラッグ&ドロップ + ファイル選択ボタン

#### **F002: RGB分析エンジン（Claude Code版移植）**
- **分析方法**: analyze_image_colors()の完全移植
- **分析項目**:
  ```javascript
  // 基本RGB統計
  r_mean, g_mean, b_mean
  
  // 色調バイアス（Claude Code版と同じ計算）
  warm_bias = r_mean - b_mean
  green_push = g_mean - (r_mean + b_mean) / 2
  
  // コントラスト・明度・彩度
  contrast = luminance_stddev
  brightness = luminance_mean
  saturation = saturation_mean
  ```

#### **F003: 5方向性ブレンドレシピエンジン**
- **推奨システム**: generate_blend_recipes()の完全移植
- **5つの方向性**:
  1. **🎯 ナチュラル補正**: 写真本来の美しさ
  2. **🎬 シネマティック**: 映画的・ドラマティック
  3. **🌅 ムード重視**: 感情・雰囲気強調
  4. **🎨 アーティスティック**: 創造的・表現重視
  5. **📷 フィルム風**: アナログ・ヴィンテージ
- **出力内容（各方向性ごと）**:
  - **ベースLUT**: 主要色調 + 適用強度
  - **調整LUT**: コントラスト調整 + 適用強度
  - **エフェクトLUT**: 特殊効果 + 適用強度
  - **適合スコア**: 各LUTの適合度表示

#### **F004: 結果表示機能**
- **写真分析結果**: 暖色バイアス、緑プッシュ、コントラスト、明度、彩度
- **5方向性レシピ表示**: タブ形式で方向性別に表示
- **Sequential Cascade説明**: 適用順序の明示
- **コピー機能**: レシピをPhotoshop用テキストでコピー

---

## 🎨 UI/UX要件

### **デザイン方針**
- **シンプル・直感的**: 技術的複雑さを隠したわかりやすいUI
- **モダン**: Next.js + Tailwind CSSでクリーンなデザイン
- **レスポンシブ**: PC・タブレット・スマホ対応

### **画面構成**

#### **メイン画面**
```
┌─────────────────────────────────────────────────────────┐
│ 🎨 Turner Blend Photo Analyzer                         │
│ 5方向性ブレンドレシピ推奨システム                          │
├─────────────────┬───────────────────────────────────────┤
│                 │                                       │
│ 📸 画像アップロード │  📊 写真分析結果                      │
│                 │  - 暖色バイアス: 0.062                 │
│ [ドラッグ&ドロップ]  │  - 緑プッシュ: 0.002                  │
│ [ファイル選択]      │  - コントラスト: 0.267                │
│                 │  - 明度: 0.391                        │
│ 📷 画像プレビュー   │  - 彩度: 0.217                       │
│ [画像1] [画像2]    │                                       │
│ [画像3] [画像4]    │  🎨 5方向性ブレンドレシピ              │
│ [画像5]          │                                       │
│                 │  [🎯自然] [🎬映画] [🌅雰囲気] [🎨芸術] [📷フィルム] │
│ [分析開始]        │                                       │
│                 │  📋 🎬 シネマティック版:                │
│                 │  🎨 Maverick.cube - 79%               │
│                 │  🔧 clean contrast.cube - 45%        │
│                 │  ✨ cyber neon.cube - 40%            │
│                 │  適合スコア: 0.639                     │
│                 │                                       │
│                 │  [レシピをコピー] [Sequential説明]      │
└─────────────────┴───────────────────────────────────────┘
```

### **ユーザーフロー**
1. **画像選択**: 1-5枚の写真をアップロード
2. **プレビュー確認**: アップロードした画像の確認
3. **分析実行**: 「分析開始」ボタンで RGB分析開始
4. **結果確認**: 写真特徴 + 5方向性別レシピを表示
5. **方向性選択**: タブで好みの方向性を選択
6. **レシピコピー**: Sequential Cascade用の設定をコピー

---

## 🔧 技術要件

### **技術スタック**
- **フロントエンド**: Next.js 14 (App Router)
- **UI Framework**: React 18
- **スタイリング**: Tailwind CSS
- **画像処理**: Canvas API (ブラウザネイティブ)
- **状態管理**: React useState/useEffect
- **デプロイ**: Vercel (無料プラン)

### **アーキテクチャ**
```
┌─────────────────┐
│   ブラウザ       │ ← ユーザー操作
└─────────────────┘
         ↓
┌─────────────────┐
│   Next.js App   │ ← UIコンポーネント（5方向性タブ）
└─────────────────┘
         ↓
┌─────────────────┐
│  Canvas API     │ ← 画像RGB抽出（複数枚対応）
└─────────────────┘
         ↓
┌─────────────────┐
│ RGB Analyzer    │ ← analyze_image_colors()移植
└─────────────────┘
         ↓
┌─────────────────┐
│ Recipe Engine   │ ← generate_blend_recipes()移植
└─────────────────┘
         ↓
┌─────────────────┐
│ 5Direction UI   │ ← 方向性別レシピ表示
└─────────────────┘
```

### **パフォーマンス要件**
- **分析時間**: 5枚の画像分析を3秒以内
- **ファイルサイズ**: 初回読み込み500KB以下
- **レスポンス**: UI操作は100ms以内に反応

---

## 🚀 開発フェーズ

### **Phase 1: MVP開発（1-2日）**
- [ ] Next.jsプロジェクト初期化
- [ ] 画像アップロード機能
- [ ] RGB分析エンジン実装
- [ ] LUT推奨ロジック実装
- [ ] 基本UI作成

### **Phase 2: UI改善（1日）**  
- [ ] レスポンシブデザイン対応
- [ ] エラーハンドリング
- [ ] ローディング状態の改善
- [ ] 結果表示の改善

### **Phase 3: デプロイ・テスト（半日）**
- [ ] Vercelデプロイ設定
- [ ] 実画像でのテスト
- [ ] Claude Code版との結果比較検証

---

## 📊 成功指標

### **技術的成功指標**
- [ ] Claude Code版と同じ推奨結果を出力
- [ ] 5枚画像の分析が3秒以内で完了
- [ ] エラーなくVercelにデプロイ完了

### **ユーザビリティ指標**
- [ ] 初回ユーザーが迷わず使用可能
- [ ] 分析結果がPhotoshopで適用可能
- [ ] スマホでも操作可能

---

## ⚠️ 制約・前提条件

### **技術的制約**
- **ブラウザ依存**: Canvas API対応ブラウザのみ
- **クライアントサイド処理**: サーバーレスで画像処理
- **メモリ制限**: ブラウザメモリ内での画像処理

### **機能的制約**
- **LUT適用機能なし**: 推奨のみで実際の適用はPhotoshop
- **画像枚数制限**: 最大5枚（性能とUI制約）
- **単純化**: GLAZE SCOUTの高度機能は実装しない

### **ビジネス制約**
- **無料運用**: Vercel無料プランの制限内
- **GLAZE LUT依存**: GLAZEの20個のLUTに特化

---

## 💡 将来的な拡張案

### **短期拡張（必要に応じて）**
- [ ] 画像の個別分析結果表示
- [ ] 分析結果のダウンロード機能
- [ ] LUT効果のプレビュー機能

### **中期拡張**
- [ ] 他のLUTパックサポート
- [ ] ユーザー独自LUTのアップロード
- [ ] 分析履歴の保存

### **長期拡張**
- [ ] AI学習機能（ユーザーフィードバック）
- [ ] リアルタイムプレビュー
- [ ] モバイルアプリ化

---

## 📝 開発開始前のチェックリスト

- [ ] 要件定義の合意
- [ ] 技術スタックの確認
- [ ] デプロイ環境の確認（Vercel）
- [ ] Claude Code版ロジックの理解
- [ ] Next.jsプロジェクト初期化

**次のステップ**: 要件定義の確認・合意 → 技術アーキテクチャ詳細設計 → 開発開始